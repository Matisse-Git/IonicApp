<ion-backdrop *ngIf="showBackdrop" tappable="false"></ion-backdrop>
<ion-header *ngIf="currentGame" mode="ios">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button color="success"></ion-back-button>
    </ion-buttons>
    <ion-title>
      {{currentGame.name}}
    </ion-title>
    <ion-button (click)="presentToast('Added to your wishlist!', 1500)"
      (click)="updateGameStatus(currentGame.id, 'toplay')" size="large" slot="end" class="wishlistButton">
      <ion-icon name="gift" [color]="wishlistButtonColor"></ion-icon>
    </ion-button>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="currentGame">

  <ion-img class="cover" [src]="currentGame.background_image">
  </ion-img>

  <ion-text>
    <ion-text class="labelHeader">
      Description:
    </ion-text>
    <ion-text>
      <ion-text>
        <div class="descriptionText" [innerHTML]="currentGame.description"></div>
      </ion-text>
    </ion-text>
  </ion-text>

  <ion-grid>
    <ion-row>
      <ion-col size="3">
        <ion-text class="labelHeader">Platforms: </ion-text>
      </ion-col>
      <ion-col>
        <div>
          <ion-text class="descriptionText" *ngFor="let platforms of currentGame.platforms; let i = index">
            {{platforms.platform.name}}
            <ion-text *ngIf="i + 1 < currentGame.platforms.length">, </ion-text>
          </ion-text>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="3">
        <ion-text class="labelHeader">Released: </ion-text>
      </ion-col>
      <ion-col>
        <div>
          <ion-text class="descriptionText" *ngIf="currentGame.released">{{currentGame.released}}</ion-text>
          <ion-text class="descriptionText" *ngIf="!currentGame.released">TBA</ion-text>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="3">
        <ion-text class="labelHeader">Metacritic: </ion-text>
      </ion-col>
      <ion-col>
        <div>
          <ion-text class="descriptionText" *ngIf="currentGame.metacritic">{{currentGame.metacritic}}</ion-text>
          <a *ngIf="!currentGame.metacritic" [href]="currentGame.metacritic_url" class="descriptionText">Click Here To Go To Metacritic Page</a>
        </div>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col size="3">
        <ion-text class="labelHeader">Developers: </ion-text>
      </ion-col>
      <ion-col>
        <div>
          <ion-text class="descriptionText" *ngFor="let dev of currentGame.developers">{{dev}}</ion-text>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-button mode="ios" id="changeStatusButton">
    <ion-select #statusSelect [value]="currentStatus" mode="ios" interface="action-sheet"
      (ionChange)="updateGameStatus(currentGame.id, statusSelect.value)"
      (ionChange)="presentToast('Added to ' + statusSelect.value + '!', 1500)">
      <ion-select-option mode="ios" *ngFor="let status of statusOptions">{{status}}</ion-select-option>
    </ion-select>
  </ion-button>

</ion-content>