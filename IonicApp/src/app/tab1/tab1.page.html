<ion-header>
  <ion-toolbar>
    <ion-title>
      My Profile
    </ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="currentProfile">
    <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
      <ion-refresher-content></ion-refresher-content>
    </ion-refresher>

    <div class="profileHeader" *ngIf="currentProfile">
      <ion-list-header mode="ios">{{currentProfile.username}}</ion-list-header>
      <ion-avatar class="ion-margin-start">
        <img [src]="currentProfile.avatar">
      </ion-avatar>
      <ion-button id="releaseButton" (click)="goToMyReleases()">
        <ion-icon size="large" name="grid"></ion-icon>
        <ion-label text-capitalize class="releaseButtonLabel" mode="ios">My Releases</ion-label>
      </ion-button>
    </div>

    <ion-reorder-group (ionItemReorder)="doReorder($event)" disabled="false">
      <br>

      <ion-item lines="none">
        <ion-label>Currently Playing</ion-label>
        <ion-badge color="success" slot="end" mode="ios">{{currentPlaying.length}}</ion-badge>
      </ion-item>

      <div class="userGames" scrollX="true" scrollY="false">
        <ion-card (click)="goToDetails(playing)" class="scrollItem" *ngFor="let playing of currentPlaying">
          <div class="name">{{playing.name}}</div>
          <img class="gameBackground" [src]="playing.background_image">
        </ion-card>
      </div>

      <br>
      <ion-item lines="none">
        <ion-label>Wishlist</ion-label>
        <ion-badge color="success" slot="end" mode="ios">{{currentToPlay.length}}</ion-badge>
      </ion-item>

      <div class="userGames" scrollX="true" scrollY="false">
        <ion-card (click)="goToDetails(toplay)" class="scrollItem" *ngFor="let toplay of currentToPlay">
          <div class="name">{{toplay.name}}</div>
          <img class="gameBackground" [src]="toplay.background_image">
          <div *ngIf="!toplay.released" class="date">TBA</div>
          <div *ngIf="toplay.released" class="date">{{ toplay.released | date: 'dd/MM/yyyy' }}</div>
        </ion-card>
      </div>

      <br>
      <div>
        <ion-item lines="none">
          <ion-label>Completed</ion-label>
          <ion-badge color="success" slot="end" mode="ios">{{currentBeaten.length}}</ion-badge>
        </ion-item>


        <div class="userGames" scrollX="true" scrollY="false">
          <ion-card (click)="goToDetails(beaten)" class="scrollItem" *ngFor="let beaten of currentBeaten">
            <div class="name">{{beaten.name}}</div>
            <img class="gameBackground" [src]="beaten.background_image">
          </ion-card>
        </div>
      </div>

      <br>

      <ion-item lines="none">
        <ion-label>Yet To Play</ion-label>
        <ion-badge color="success" slot="end" mode="ios">{{currentYet.length}}</ion-badge>
      </ion-item>

      <div class="userGames" scrollX="true" scrollY="false">
        <ion-card (click)="goToDetails(yet)" class="scrollItem" *ngFor="let yet of currentYet">
          <div class="name">{{yet.name}}</div>
          <img class="gameBackground" [src]="yet.background_image">
        </ion-card>
      </div>

      <br>

      <ion-item lines="none">
        <ion-label>Dropped</ion-label>
        <ion-badge color="success" slot="end" mode="ios">{{currentDropped.length}}</ion-badge>
      </ion-item>

      <div class="userGames" scrollX="true" scrollY="false">
        <ion-card (click)="goToDetails(dropped)" class="scrollItem" *ngFor="let dropped of currentDropped">
          <div class="name">{{dropped.name}}</div>
          <img class="gameBackground" [src]="dropped.background_image">
        </ion-card>
      </div>
    </ion-reorder-group>
  </div>

  <div *ngIf="!currentProfile">
    <ion-grid>
      <ion-row>
        <ion-col>
          <ion-skeleton-text id="usernameSkeleton" animated width="8em"></ion-skeleton-text>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col size="3.2">
          <ion-avatar class="ion-margin-start">
            <ion-skeleton-text animated></ion-skeleton-text>
          </ion-avatar>
        </ion-col>
        <ion-col>
          <div id="myReleasesSkeleton">
            <ion-skeleton-text animated width="10em"></ion-skeleton-text>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>

    <br>
    <ion-item id="categoryTitle" lines="none">
      <ion-skeleton-text id="titleSkeleton" animated width="25em"></ion-skeleton-text>
    </ion-item>

    <div id="gameCardsSkeleton" scrollX='true' scrollY="false">

      <div id="gameCardSkeleton">
        <ion-skeleton-text animated width="8.3em"></ion-skeleton-text>
      </div>
      <div id="gameCardSkeleton">
        <ion-skeleton-text animated width="8.3em"></ion-skeleton-text>
      </div>
      <div id="gameCardSkeleton">
        <ion-skeleton-text animated width="8.3em"></ion-skeleton-text>
      </div>
    </div>

    <br>

    <ion-item id="categoryTitle" lines="none">
      <ion-skeleton-text id="titleSkeleton" animated width="25em"></ion-skeleton-text>
    </ion-item>

    <div id="gameCardsSkeleton" scrollX='true' scrollY="false">
      <div id="gameCardSkeleton">
        <ion-skeleton-text animated width="8.3em"></ion-skeleton-text>
      </div>
      <div id="gameCardSkeleton">
        <ion-skeleton-text animated width="8.3em"></ion-skeleton-text>
      </div>
      <div id="gameCardSkeleton">
        <ion-skeleton-text animated width="8.3em"></ion-skeleton-text>
      </div>
    </div>

  </div>

</ion-content>

<style>
  @import url('https://fonts.googleapis.com/css?family=Poppins&display=swap');
  @import url('https://fonts.googleapis.com/css?family=Raleway&display=swap');
  @import url('https://fonts.googleapis.com/css?family=Maven+Pro:700&display=swap');
</style>