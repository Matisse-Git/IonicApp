<ion-header>
  <ion-toolbar>
    <ion-title>
      My Profile
    </ion-title>
    <ion-buttons slot="secondary">
      <ion-button (click)="createPopover($event)">
        <ion-icon slot="icon-only" name="more"></ion-icon>
      </ion-button>
    </ion-buttons>  
  </ion-toolbar>
</ion-header>


<ion-content *ngIf="!currentProfile">
  <div class="loadingText">
  <ion-label>Loading please wait...</ion-label>
</div>
</ion-content>

<ion-content *ngIf="currentProfile">
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  
  <div class="profileHeader" *ngIf="currentProfile">
    <ion-list-header mode="ios">{{currentProfile.username}}</ion-list-header>
    <ion-avatar class="ion-margin-start">
      <img [src]="currentProfile.avatar">
    </ion-avatar>
    <ion-button id="releaseButton" (click)="goToMyReleases()">
      <ion-icon size="large" name="grid"></ion-icon>
      <ion-label text-capitalize class="releaseButtonLabel" mode="ios">My Releases</ion-label>
    </ion-button>
  </div>

  <ion-reorder-group (ionItemReorder)="doReorder($event)" disabled="false">
    <br>
    <ion-grid>
      <ion-row>
        <ion-col size="8">
          <ion-label>Currently Playing</ion-label>
        </ion-col>
        <ion-col>
          <ion-label>({{currentPlaying.length}})</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
    <div class="userGames" scrollX="true" scrollY="false">
      <ion-card (click)="goToDetails(playing)" class="scrollItem" *ngFor="let playing of currentPlaying">
        <div class="name">{{playing.name}}</div>
        <img class="gameBackground" [src]="playing.background_image">
      </ion-card>
    </div>

    <br>
    <ion-grid>
      <ion-row>
        <ion-col size="3.5">
          <ion-label>Wishlist</ion-label>
        </ion-col>
        <ion-col>
          <ion-label>({{currentToPlay.length}})</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
    <div class="userGames" scrollX="true" scrollY="false">
      <ion-card (click)="goToDetails(toplay)" class="scrollItem" *ngFor="let toplay of currentToPlay">
        <div class="name">{{toplay.name}}</div>
        <img class="gameBackground" [src]="toplay.background_image">
        <div *ngIf="!toplay.released" class="date">TBA</div>
        <div *ngIf="toplay.released" class="date">{{ toplay.released | date: 'dd/MM/yyyy' }}</div>
      </ion-card>
    </div>

    <br>
    <div>
      <ion-grid>
        <ion-row>
          <ion-col size="5.3">
            <ion-label>Completed</ion-label>
          </ion-col>
          <ion-col>
            <ion-label>({{currentBeaten.length}})</ion-label>
          </ion-col>
        </ion-row>
      </ion-grid>
        <div class="userGames" scrollX="true" scrollY="false">
        <ion-card (click)="goToDetails(beaten)" class="scrollItem" *ngFor="let beaten of currentBeaten">
          <div class="name">{{beaten.name}}</div>
          <img class="gameBackground" [src]="beaten.background_image">
        </ion-card>
      </div>
    </div>

    <br>
    <ion-grid>
      <ion-row>
        <ion-col size="5.5">
          <ion-label>Yet To Play</ion-label>
        </ion-col>
        <ion-col>
          <ion-label>({{currentYet.length}})</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
    <div class="userGames" scrollX="true" scrollY="false">
      <ion-card (click)="goToDetails(yet)" class="scrollItem" *ngFor="let yet of currentYet">
        <div class="name">{{yet.name}}</div>
        <img class="gameBackground" [src]="yet.background_image">
      </ion-card>
    </div>

    <br>
    <ion-grid>
      <ion-row>
        <ion-col size="4">
          <ion-label>Dropped</ion-label>
        </ion-col>
        <ion-col>
          <ion-label>({{currentDropped.length}})</ion-label>
        </ion-col>
      </ion-row>
    </ion-grid>
    <div class="userGames" scrollX="true" scrollY="false">
      <ion-card (click)="goToDetails(dropped)" class="scrollItem" *ngFor="let dropped of currentDropped">
        <div class="name">{{dropped.name}}</div>
        <img class="gameBackground" [src]="dropped.background_image">
      </ion-card>
    </div>
  </ion-reorder-group>

</ion-content>

<style>
  @import url('https://fonts.googleapis.com/css?family=Poppins&display=swap');
  @import url('https://fonts.googleapis.com/css?family=Raleway&display=swap');
  @import url('https://fonts.googleapis.com/css?family=Maven+Pro:700&display=swap');
</style>